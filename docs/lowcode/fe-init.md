## é¡¹ç›®å‡†å¤‡

### step1: åˆå§‹åŒ–é¡¹ç›®

- 1.æ–°å»ºä»“åº“ï¼Œå¹¶ clone åˆ°æœ¬åœ°
- 2.åˆå§‹åŒ–é¡¹ç›®ï¼šæ‰§è¡Œ`pnpm init`åˆå§‹åŒ–é¡¹ç›®ï¼ˆæœ¬è´¨ä¸Šå’Œ `npm init` ä¸€è‡´ï¼‰

### step2: pnpm+monorepo åˆå§‹åŒ–é¡¹ç›®æ¶æ„

ä½¿ç”¨ pnpm workspace æ¥åˆå§‹åŒ– monorepo é¡¹ç›®çš„å·¥ç¨‹æ¶æ„:

![](./img/file-structure.png)

åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ†åˆ«åˆ›å»º `app` å’Œ `package` æ–‡ä»¶å¤¹ï¼Œä»¥åŠ`pnpm-workspace`é…ç½®æ–‡ä»¶ï¼š

```yaml
ğŸ“¦my-project
â”£ ğŸ“‚apps    // å­˜æ”¾åº”ç”¨
â”ƒ â”— ...
â”£ ğŸ“‚packages   // å­˜æ”¾ç±»åº“
â”ƒ â”— ...
â”£ ğŸ“œpackage.json
â”£ ğŸ“œpnpm-workspace.yaml   // é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥å®šä¹‰ monorepo çš„å·¥ä½œåŒºé—´
```

åœ¨ pnpm-workspace.yaml ä¸­å£°æ˜ app å’Œ packages çš„å·¥ä½œåŒºï¼š

```yaml
packages:
  - 'apps/**'
  - 'packages/**'
```

### step3: å®‰è£… ESLint å’Œ TS

å¯¹äº Monorepo çš„ä»“åº“æ¥è¯´ï¼Œå¯ä»¥åœ¨ä¸»ä»“åº“ä¸­åˆ›å»º ESLint çš„æ£€æŸ¥è§„åˆ™ï¼Œç„¶åä½œç”¨äºæ‰€æœ‰å­é¡¹ç›®ã€‚ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªå­åŒ…é‡Œåˆ›å»º ESLintã€‚

**1. pnpm å‘½ä»¤æ ¹ç›®å½•å®‰è£… ESLint å’Œ TypeScript**

```js
# -D è¿è¡Œæ—¶ä¾èµ–
# -w è¡¨ç¤ºå®‰è£…åˆ° workspace æ ¹ç›®å½•ä¸‹
pnpm add eslint typescript -Dw    // pnpm add eslint@8.46.0 typescript@5.1.6  -Dw
// pnpm config set registry http://registry.npm.taobao.org
```

**2. åˆå§‹åŒ–é¡¹ç›®çš„ç›¸å…³ ESLint é…ç½®**

åˆå§‹åŒ– ESLint é…ç½®ï¼š

```
npx eslint --init  // å› ä¸ºeslintä¸æ˜¯å…¨å±€æ¨¡å—çš„ä¾èµ–ï¼Œæ— æ³•ç›´æ¥æ‰§è¡Œeslintçš„è„šæœ¬å‘½ä»¤ï¼Œéœ€è¦åœ¨å‰é¢åŠ npx
```

æ‰§è¡Œå‘½ä»¤åï¼Œå¯ä»¥é€‰æ‹© Standard è§„èŒƒåº“ã€ä»¥åŠæ”¯æŒ TSï¼š
![](./img/eslint-init.png)
æ‰§è¡ŒæˆåŠŸåï¼Œæ ¹ç›®å½•ä¼šäº§ç”Ÿæ–‡ä»¶ï¼š`.eslintrc.js`ï¼Œ[ESLint é…ç½®æ–‡æ¡£æŸ¥é˜…](https://eslint.org/docs/latest/use/configure/)

**3. æ£€æµ‹**
é€šè¿‡æ‰§è¡Œ `eslint --ext .js,.jsx,.ts,.tsx` ï¼Œæ¥è¯•è¯•çœ‹å‘½ä»¤è¡Œçš„ä¸è§„èŒƒä»£ç æ£€æŸ¥æ˜¯å¦æ˜¯èƒ½å¤Ÿä½¿ç”¨çš„ï¼Œå¯ä»¥æ­£å¸¸æ£€æµ‹çš„è¯ï¼Œå°†å‘½ä»¤æ·»åŠ åˆ°æ ¹ç›®å½• package.json æ‰§è¡Œè„šæœ¬å½“ä¸­ï¼š

```yaml
"script": {

- "lint:js": "eslint --ext .js,.jsx,.ts,.tsx ./",
- "lint:fix": "eslint --fix --cache --ext .js,.jsx,.ts,.tsx ./"
  }
```

æ‰§è¡Œ lint è„šæœ¬åï¼Œä¼šå°† Error å’Œ Warning éƒ½è¾“å‡ºåœ¨æ§åˆ¶å°ã€‚
è¿™é‡Œä¸å°å†Œå­æ“ä½œç»“æœä¸ç¬¦åˆã€‚ã€‚å®é™…æŠ¥é”™äº†ï¼Œtsconfig.json æ–‡ä»¶å’©æœ‰

### step4.pnpm+Vite å¿«é€Ÿæ„å»ºå­é¡¹ç›®

åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œéœ€è¦æ„å»ºæˆ‘ä»¬çš„ä¸€äº› Npm åŒ…ã€‚Webpackã€Rollup è¿™äº›æ‰“åŒ…å·¥å…·é…ç½®æ— ç–‘æ˜¯ç¹ççš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¼€ç®±å³ç”¨çš„æ‰“åŒ…æ„å»ºå·¥å…·ã€‚

å…³äº `Vite` ä½œä¸ºä¾èµ–åº“çš„æ„å»ºå·¥å…·ï¼ŒåŸå› æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

- éƒ½æ˜¯é€šè¿‡é¢„ç½® Rollup é…ç½®ä½œä¸ºæ„å»ºå·¥å…·ï¼ŒVite ä¸ä»…ä»…æ”¯æŒç±»åº“çš„æ‰“åŒ…ï¼ŒåŒæ—¶è¿˜å¯ä»¥ä½œä¸º Bundless æ„å»ºå™¨ï¼Œåç»­å¿«é€Ÿç§»åŠ¨ Demo æœåŠ¡ï¼Œæœ‰åˆ©äºè°ƒè¯•ï¼›
- Vite ç¤¾åŒºç”Ÿæ€å¥½ï¼Œç»´æŠ¤åŠ›åº¦å¤§ï¼Œæ’ä»¶ç»´æŠ¤ä¹Ÿå¯è§‚ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œé›†æˆæ‰©å±•ã€‚

é€šè¿‡ `pnpm create` ä½¿ç”¨ vite å¥—ä»¶æ–°å»ºä¸€ä¸ªä»¥ react-ts ä¸ºæ¨¡ç‰ˆçš„é¡¹ç›®

```js
cd packages
pnpm create vite core --template react-ts
```

ç„¶åï¼š

```js
cd core
pnpm install
pnpm run dev
```

![](./img/create-core.png)

### step5.åŠ å…¥ Turborepo

ç”±äºæˆ‘ä»¬æ˜¯ä¸€ä¸ª Monorepo çš„é¡¹ç›®ï¼Œå¿…ä¸å¯å°‘çš„å°±æ˜¯å­åŒ…ä¸å­åŒ…ä¹‹é—´çš„ç›¸äº’ä¾èµ–ï¼Œå­åŒ…ä¸åº”ç”¨ä¹‹é—´çš„ç›¸äº’ä¾èµ–ï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½çš„æµç¨‹åŒ–æ„å»ºé¡¹ç›®ï¼Œå¯¹æ•´ä¸ªå·¥ç¨‹éœ€è¦ä¸€ä¸ªå¥½çš„å·¥å…·æ¥ç®¡ç†å·¥ä½œåŒºå’Œä»»åŠ¡ï¼Œæ ‡å‡†æ¯æ„å»ºçš„å·¥ä½œæµç¨‹ã€‚

[Add Turborepo to your existing monorepo](https://turbo.build/repo/docs/getting-started/existing-monorepo)

æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š

```
pnpm install turbo  -D
```

ç„¶ååœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`turbo.json`ï¼š

```json
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**", ".next/**"]
    },
    "test": {
      "dependsOn": ["build"],
      "inputs": ["test/**/*.ts", "test/**/*.tsx"]
    },
    "lint": {
      "outputs": []
    },
    "dev": {
      "cache": false
    }
  }
}
```

ä¸»è¦æ˜¯ç”¨äºæ„å»º CI ä½¿ç”¨ã€‚åœ¨å·¥ç¨‹ package ä¸­æ‰§è¡Œ turbo run build --filter @lgnition-web/editor å³å¯å®Œæˆæ„å»ºç¼–è¾‘å™¨åº”ç”¨çš„ç›¸å…³ä»»åŠ¡ã€‚

## æ‹–æ‹½åŠŸèƒ½

ç»å¤§éƒ¨åˆ†çš„å¯è§†åŒ–æ­å»ºå¹³å°éƒ½ä¼šä½¿ç”¨æ‹–æ‹‰æ‹½æ¥å®Œæˆå¯¹åº”é¡µé¢çš„å¸ƒå±€ï¼Œå‡å°‘éç ”å‘æˆå‘˜å¯¹äºé€‰æ‹©ç‰©æ–™è¿›è¡Œæ•´ä½“å¸ƒå±€çš„å­¦ä¹ æˆæœ¬ï¼Œæ‰€ä»¥æµç•…çš„æ‹–æ‹½åŠŸèƒ½æ˜¯åŸºäº GUI çš„ä½ä»£ç å¹³å°ä¸­ç¼–è¾‘å™¨æ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚

### æ‹–æ‹½æ–¹æ¡ˆé€‰æ‹©

#### 1.HTML5 åŸç”Ÿæ‹–æ‹½æ–¹æ¡ˆ

[![](../img/juejin.svg)](https://code.juejin.cn/pen/7335454046758961161)

#### 2.ç¬¬ä¸‰æ–¹åº“

- ç½‘æ ¼æ‹–æ‹½å¸ƒå±€ï¼šreact-gird-layout
- ä»»æ„ä½ç½®æ‹–æ‹½ï¼šreact-dnd, dnd-kit

[ä½ä»£ç ç¼–è¾‘å™¨é€šç”¨æ¡†æ¶â€”â€”craft.js](https://zhuanlan.zhihu.com/p/649243455?utm_id=0)

æ€»ç»“ï¼š

- ä½¿ç”¨ `craft.js` è¿™ä¸ªå¼€æºç»„ä»¶æ¥ä½œä¸ºä¸€ä¸ªä¸­é—´å±‚å®ç°ç¼–è¾‘å™¨ç›¸å…³çš„æ‹–æ‹½ä¸ç¼–æ’å…³è”
- iframe å®ç°ç¼–è¾‘å™¨ç”»å¸ƒé¢„è§ˆ

### step1. å®‰è£… craftjs

æ ¹ç›®å½•æ‰§è¡Œï¼š

```js
// -w ä¸ºå…¨å±€å®‰è£…æ¨¡å¼ï¼Œå®‰è£…ååœ¨æ‰€æœ‰çš„å­åŒ…å½“ä¸­éƒ½å¯ä»¥ç›´æ¥å¼•ç”¨åˆ°å®ƒï¼Œæ— éœ€é‡å¤è¿›è¡Œå®‰è£…ã€‚
pnpm add @craftjs/core -w
```

### step2.
